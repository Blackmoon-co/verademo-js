veracode_static_scan:
  artifact_file: app.zip

  # --------- PIPELINE SCAN (feature/**) ----------
  push:
    trigger: true
    branches_to_run:
      - 'feature/**'
    branches_to_exclude:
      - 'develop'
      - 'main'
      - 'master'

  # --------- SANDBOX (develop) ----------
    # Para develop se usar√° el mismo pero con sandbox
  sandbox:
    - name: "develop"

  # --------- UPLOAD & SCAN (main / master) ---------
  upload_and_scan:
    branches_to_run:
      - 'main'
      - 'master'

  # --------- PULL REQUEST -----------
  pull_request:
    trigger: true
    action:
      - opened
      - synchronize
    target_branch:
      - default_branch

  # --------- OPCIONES ----------
  analysis_on_platform: true
  break_build_policy_findings: true
  break_build_invalid_policy: true
  break_build_on_error: true

  policy: 'Veracode Recommended Medium + SCA'

  create_code_scanning_alert: false
  create_issue: false



# ----------------------------------
veracode_sca_scan:
# ----------------------------------
  push:
    trigger: true
    branches_to_run:
      - '*'

  pull_request:
    trigger: true
    action:
      - opened
      - synchronize

  break_build_policy_findings: true
  break_build_on_error: true



# ----------------------------------
veracode_iac_secrets_scan:
# ----------------------------------
  push:
    trigger: true
    branches_to_run:
      - 'main'
      - 'master'
      - 'develop'
