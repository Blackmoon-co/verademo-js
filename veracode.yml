veracode_static_scan:
  artifact_file: app.zip

  push:
    trigger: true
    branches_to_run:
      - "feature/**"
      - "develop"

  pull_request:
    trigger: true
    action:
      - opened
      - synchronize
    target_branch:
      - "main"

  analysis_on_platform: true

  sandbox:
    when:
      branch:
        equals: develop
    name: develop-sandbox

  break_build_policy_findings: false
  break_build_invalid_policy: true
  break_build_on_error: false
  policy: "Veracode Recommended Medium + SCA"


veracode_sca_scan:
  push:
    trigger: true
    branches_to_run:
      - "feature/**"
      - "develop"

  break_build_on_error: true
  break_build_policy_findings: true


veracode_iac_secrets_scan:
  push:
    trigger: true
    branches_to_run:
      - "feature/**"
      - "develop"

  break_build_policy_findings: true
  break_build_on_error: true
