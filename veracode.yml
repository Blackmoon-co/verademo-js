veracode_static_scan:
  artifact_file: app.zip

  push:
    trigger: true
    branches_to_run:
      - 'feature/**'
      - develop
      - main

  branch_rules:
    - branch_name: 'feature/**'
      analysis_on_platform: false

    - branch_name: develop
      analysis_on_platform: true

    - branch_name: main
      analysis_on_platform: true

  break_build_policy_findings: true
  break_build_invalid_policy: true
  break_build_on_error: false
  policy: 'Veracode Recommended Medium + SCA'


veracode_sca_scan:
  push:
    trigger: true
    branches_to_run:
      - 'feature/**'
      - develop
      - main

  break_build_on_error: true
  break_build_policy_findings: true


veracode_iac_secrets_scan:
  push:
    trigger: true
    branches_to_run:
      - 'feature/**'
      - develop
      - main

  break_build_policy_findings: true
  break_build_on_error: true
